{"ast":null,"code":"// client/src/reducers/userReducer.js\nimport axios from 'axios';\n\n// Action types\nconst LOGIN_SUCCESS = 'LOGIN_SUCCESS';\nconst REGISTER_SUCCESS = 'REGISTER_SUCCESS';\nconst LOGOUT = 'LOGOUT';\n\n// Initial state\nconst initialState = {\n  user: null,\n  // Stores user data (e.g., username, email, etc.)\n  isAuthenticated: false // Boolean to track if user is logged in\n};\n\n// Action creators\nexport const loginSuccess = userData => ({\n  type: LOGIN_SUCCESS,\n  payload: userData\n});\nexport const registerSuccess = userData => ({\n  type: REGISTER_SUCCESS,\n  payload: userData\n});\nexport const logout = () => ({\n  type: LOGOUT\n});\n\n// Async action to handle login\nexport const login = (username, password) => async dispatch => {\n  try {\n    const response = await axios.post('http://localhost:5000/api/auth/login', {\n      username,\n      password\n    });\n    dispatch(loginSuccess(response.data)); // Dispatch login success with user data\n  } catch (error) {\n    var _error$response, _error$response$data;\n    // Dispatch an error action or return the error message\n    const errorMessage = ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || 'Login failed';\n    return {\n      error: new Error(errorMessage)\n    }; // Return the error to the component\n  }\n};\n\n// Async action to handle registration\nexport const register = ({\n  username,\n  email,\n  password\n}) => async dispatch => {\n  try {\n    const response = await axios.post('http://localhost:5000/api/auth/register', {\n      username,\n      email,\n      password\n    });\n    dispatch(registerSuccess(response.data)); // Dispatch register success with user data\n  } catch (error) {\n    console.error('Registration failed:', error);\n    // Optionally handle errors with a failure action\n    // dispatch({ type: AUTH_ERROR, payload: error.response?.data?.message || 'Registration failed' });\n  }\n};\n\n// Async action to handle logout\nexport const logoutUser = () => dispatch => {\n  // Clear any client-side storage if needed (like JWT in local storage)\n  dispatch(logout()); // Dispatch logout action\n};\n\n// Reducer\nconst userReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case LOGIN_SUCCESS:\n    case REGISTER_SUCCESS:\n      return {\n        ...state,\n        user: action.payload,\n        isAuthenticated: true\n      };\n    case LOGOUT:\n      return {\n        ...state,\n        user: null,\n        isAuthenticated: false\n      };\n    default:\n      return state;\n  }\n};\nexport default userReducer;","map":{"version":3,"names":["axios","LOGIN_SUCCESS","REGISTER_SUCCESS","LOGOUT","initialState","user","isAuthenticated","loginSuccess","userData","type","payload","registerSuccess","logout","login","username","password","dispatch","response","post","data","error","_error$response","_error$response$data","errorMessage","message","Error","register","email","console","logoutUser","userReducer","state","action"],"sources":["C:/Users/Chase/Desktop/PERN/client/src/reducers/userReducer.js"],"sourcesContent":["// client/src/reducers/userReducer.js\r\nimport axios from 'axios';\r\n\r\n// Action types\r\nconst LOGIN_SUCCESS = 'LOGIN_SUCCESS';\r\nconst REGISTER_SUCCESS = 'REGISTER_SUCCESS';\r\nconst LOGOUT = 'LOGOUT';\r\n\r\n// Initial state\r\nconst initialState = {\r\n  user: null,              // Stores user data (e.g., username, email, etc.)\r\n  isAuthenticated: false,  // Boolean to track if user is logged in\r\n};\r\n\r\n// Action creators\r\nexport const loginSuccess = (userData) => ({\r\n  type: LOGIN_SUCCESS,\r\n  payload: userData,\r\n});\r\n\r\nexport const registerSuccess = (userData) => ({\r\n  type: REGISTER_SUCCESS,\r\n  payload: userData,\r\n});\r\n\r\nexport const logout = () => ({\r\n  type: LOGOUT,\r\n});\r\n\r\n// Async action to handle login\r\nexport const login = (username, password) => async (dispatch) => {\r\n  try {\r\n      const response = await axios.post('http://localhost:5000/api/auth/login', { username, password });\r\n      dispatch(loginSuccess(response.data)); // Dispatch login success with user data\r\n  } catch (error) {\r\n      // Dispatch an error action or return the error message\r\n      const errorMessage = error.response?.data?.message || 'Login failed';\r\n      return { error: new Error(errorMessage) }; // Return the error to the component\r\n  }\r\n};\r\n\r\n\r\n// Async action to handle registration\r\nexport const register = ({ username, email, password }) => async (dispatch) => {\r\n  try {\r\n      const response = await axios.post('http://localhost:5000/api/auth/register', { username, email, password });\r\n      dispatch(registerSuccess(response.data));  // Dispatch register success with user data\r\n  } catch (error) {\r\n      console.error('Registration failed:', error);\r\n      // Optionally handle errors with a failure action\r\n      // dispatch({ type: AUTH_ERROR, payload: error.response?.data?.message || 'Registration failed' });\r\n  }\r\n};\r\n\r\n\r\n// Async action to handle logout\r\nexport const logoutUser = () => (dispatch) => {\r\n  // Clear any client-side storage if needed (like JWT in local storage)\r\n  dispatch(logout());  // Dispatch logout action\r\n};\r\n\r\n// Reducer\r\nconst userReducer = (state = initialState, action) => {\r\n  switch (action.type) {\r\n    case LOGIN_SUCCESS:\r\n    case REGISTER_SUCCESS:\r\n      return {\r\n        ...state,\r\n        user: action.payload,\r\n        isAuthenticated: true,\r\n      };\r\n    case LOGOUT:\r\n      return {\r\n        ...state,\r\n        user: null,\r\n        isAuthenticated: false,\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default userReducer;\r\n"],"mappings":"AAAA;AACA,OAAOA,KAAK,MAAM,OAAO;;AAEzB;AACA,MAAMC,aAAa,GAAG,eAAe;AACrC,MAAMC,gBAAgB,GAAG,kBAAkB;AAC3C,MAAMC,MAAM,GAAG,QAAQ;;AAEvB;AACA,MAAMC,YAAY,GAAG;EACnBC,IAAI,EAAE,IAAI;EAAe;EACzBC,eAAe,EAAE,KAAK,CAAG;AAC3B,CAAC;;AAED;AACA,OAAO,MAAMC,YAAY,GAAIC,QAAQ,KAAM;EACzCC,IAAI,EAAER,aAAa;EACnBS,OAAO,EAAEF;AACX,CAAC,CAAC;AAEF,OAAO,MAAMG,eAAe,GAAIH,QAAQ,KAAM;EAC5CC,IAAI,EAAEP,gBAAgB;EACtBQ,OAAO,EAAEF;AACX,CAAC,CAAC;AAEF,OAAO,MAAMI,MAAM,GAAGA,CAAA,MAAO;EAC3BH,IAAI,EAAEN;AACR,CAAC,CAAC;;AAEF;AACA,OAAO,MAAMU,KAAK,GAAGA,CAACC,QAAQ,EAAEC,QAAQ,KAAK,MAAOC,QAAQ,IAAK;EAC/D,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,IAAI,CAAC,sCAAsC,EAAE;MAAEJ,QAAQ;MAAEC;IAAS,CAAC,CAAC;IACjGC,QAAQ,CAACT,YAAY,CAACU,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC,CAAC;EAC3C,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAC,eAAA,EAAAC,oBAAA;IACZ;IACA,MAAMC,YAAY,GAAG,EAAAF,eAAA,GAAAD,KAAK,CAACH,QAAQ,cAAAI,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBF,IAAI,cAAAG,oBAAA,uBAApBA,oBAAA,CAAsBE,OAAO,KAAI,cAAc;IACpE,OAAO;MAAEJ,KAAK,EAAE,IAAIK,KAAK,CAACF,YAAY;IAAE,CAAC,CAAC,CAAC;EAC/C;AACF,CAAC;;AAGD;AACA,OAAO,MAAMG,QAAQ,GAAGA,CAAC;EAAEZ,QAAQ;EAAEa,KAAK;EAAEZ;AAAS,CAAC,KAAK,MAAOC,QAAQ,IAAK;EAC7E,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMjB,KAAK,CAACkB,IAAI,CAAC,yCAAyC,EAAE;MAAEJ,QAAQ;MAAEa,KAAK;MAAEZ;IAAS,CAAC,CAAC;IAC3GC,QAAQ,CAACL,eAAe,CAACM,QAAQ,CAACE,IAAI,CAAC,CAAC,CAAC,CAAE;EAC/C,CAAC,CAAC,OAAOC,KAAK,EAAE;IACZQ,OAAO,CAACR,KAAK,CAAC,sBAAsB,EAAEA,KAAK,CAAC;IAC5C;IACA;EACJ;AACF,CAAC;;AAGD;AACA,OAAO,MAAMS,UAAU,GAAGA,CAAA,KAAOb,QAAQ,IAAK;EAC5C;EACAA,QAAQ,CAACJ,MAAM,CAAC,CAAC,CAAC,CAAC,CAAE;AACvB,CAAC;;AAED;AACA,MAAMkB,WAAW,GAAGA,CAACC,KAAK,GAAG3B,YAAY,EAAE4B,MAAM,KAAK;EACpD,QAAQA,MAAM,CAACvB,IAAI;IACjB,KAAKR,aAAa;IAClB,KAAKC,gBAAgB;MACnB,OAAO;QACL,GAAG6B,KAAK;QACR1B,IAAI,EAAE2B,MAAM,CAACtB,OAAO;QACpBJ,eAAe,EAAE;MACnB,CAAC;IACH,KAAKH,MAAM;MACT,OAAO;QACL,GAAG4B,KAAK;QACR1B,IAAI,EAAE,IAAI;QACVC,eAAe,EAAE;MACnB,CAAC;IACH;MACE,OAAOyB,KAAK;EAChB;AACF,CAAC;AAED,eAAeD,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}